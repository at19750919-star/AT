<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- =================================================================== -->
    <!-- === 1. é é¢åŸºæœ¬è¨­å®š (Meta & Title) === -->
    <!-- =================================================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AT 3.0</title>

    <!-- =================================================================== -->
    <!-- === 2. CSS æ¨£å¼å€ (Styling) === -->
    <!-- =================================================================== -->
    <style>
       /* =========================================================
          â‘  æ‡¸æµ®è¨ˆç®—å·¥å…·èˆ‡åŸºç¤è¼”åŠ©
          ---------------------------------------------------------
          æ§åˆ¶æµ®å‹•å·¥å…·ã€è¼¸å…¥æ¬„ã€çµæœå¡ç‰‡èˆ‡ç‹€æ…‹åˆ—ã€‚
       --------------------------------------------------------- */
.floating-widget {
  position: fixed; top: 100px; left: 100px; z-index: 9999;
  background: #2c2c2c; border: 1px solid #4a4a4a; border-radius: 10px;
  box-shadow: 0 4px 16px rgba(0,0,0,.55);
  display: none; width: auto; min-width: 300px; max-width: 380px; padding: 6px;
}
.widget-content { padding: 6px; display: flex; flex-direction: column; gap: 8px; color: #fff; }
.widget-actions { display: flex; gap: 6px; }
.widget-action {
  border: none; border-radius: 6px; padding: 6px 10px; font-size: 13px; font-weight: 600;
  cursor: pointer; color: #fff; background: #3c3c3c; transition: background-color .2s ease, color .2s ease;
}
.widget-close { background: #555; } .widget-close:hover { background: #6d6d6d; }
.widget-reset { background: #d9534f; flex: 1; } .widget-reset:hover { background: #c9302c; }

.widget-content .card-inputs { display: grid; grid-template-columns: repeat(6,44px); gap: 4px; justify-content: center; }
.widget-content .card-input {
  width: 44px; height: 32px; text-align: center; font-size: 16px; font-weight: 600; padding: 0; box-sizing: border-box;
  background: #343434; border: 1px solid #555; color: #fff; border-radius: 5px; transition: .2s;
}
.widget-content .card-input:focus { outline: none; border-color: #66aaff; box-shadow: 0 0 3px rgba(102,170,255,.4); }
.widget-content .card-input.disabled { background: #1f1f1f; border-color: #333; color: #666; pointer-events: none; }
.widget-content .card-input.highlight { border-color: #ffcc00; background: #4d462f; }

.widget-content .results { display: grid; gap: 6px; }
.widget-content .result-strip {
  display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 6px; padding: 6px;
  background: #2f2f2f; border-radius: 8px;
}
.widget-content .result-value { font-size: 22px; font-weight: 700; text-align: center; padding: 6px 0; border-radius: 6px; background: #3f3f3f; color:#fff; }
.widget-content .result-player { color:#73b4ff; background:#2c3648; }
.widget-content .result-banker { color:#ff8673; background:#3f2930; }
.widget-content .result-outcome { color:#fff; }
.widget-content .result-value.win-B { background:#d9534f; color:#fff; }
.widget-content .result-value.win-P { background:#428bca; color:#fff; }
.widget-content .result-value.win-T { background:#5cb85c; color:#041904; }

/* =========================================================
   â‘¡ å…¨åŸŸèƒŒæ™¯èˆ‡æ§åˆ¶å€æ¡†æ¶
   ---------------------------------------------------------
   èª¿æ•´ body/containerã€æ§åˆ¶æ¬„æŒ‰éˆ•ã€mini-grid ç­‰å¯¬åº¦èˆ‡é–“è·ã€‚
   --------------------------------------------------------- */
body { font-family: 'Microsoft JhengHei', sans-serif; margin: 0; background: #f5f5f5; }
.container { width: 100%; margin: 0; background: #fff; padding: 20px; box-sizing: border-box; }

/* ---------------------------------------------------------
   å³å´ç‰Œé´ç¸®åœ–é è¦½æ ¼
   --------------------------------------------------------- */
.mini-grid-wrapper { margin: 12px 0; border: 1px solid #ced4da; border-radius: 10px; background: #ffffff; overflow: hidden; }
.grid-preview { display: grid; grid-template-columns: repeat(21,1fr); gap: 0; border-radius: 10px; overflow: hidden; }
.grid-preview.mini { max-height: none; overflow-y: visible; }
.grid-preview .cell {
  display: flex; align-items: center; justify-content: center; height: 20px;
  font-size: 14px; font-weight: 600; background: #e8eaee; color: #e6eef8;
  border: 1px solid rgba(255,255,255,.05);
}
.grid-preview .cell.indicator-cell {
  font-size: 10px;
  font-weight: 700;
  color: #cbd5f5;
}
.grid-preview .cell.result-banker { color: #f56565; background: #f4f0ff; }
.grid-preview .cell.result-player { color: #7dd3fc; background: #f4f0ff; }
.grid-preview .cell.result-tie    { color: #22c55e; background: #f4f0ff; }
.grid-preview .cell.card-red { background-color: #f8d7da; color: #92000f; }
.grid-preview .cell.card-blue { background-color: #d4e9ff; color: #0b3c7e; }
.grid-preview .cell.signal-match { color: #dc3545; font-weight: 700; }
.grid-preview .cell.tbox-left   { border-left:   2px solid #ff4d4f; }
.grid-preview .cell.tbox-right  { border-right:  2px solid #ff4d4f; }
.grid-preview .cell.tbox-top    { border-top:    2px solid #ff4d4f; }
.grid-preview .cell.tbox-bottom { border-bottom: 2px solid #ff4d4f; }
.grid-preview .cell.segment-b { opacity: .9; }
.grid-preview .cell.segment-c { opacity: .7; }
.grid-preview .cell.group-divider-right { border-right: 3px solid rgba(255,255,255,.25); }
.grid-preview .cell.group-divider-left  { border-left:  3px solid rgba(255,255,255,.25); }
.grid-placeholder { text-align: center; padding: 20px; font-size: 13px; color: #adb5bd; }

/* ---------------------------------------------------------
   ç‰Œå±€æ‘˜è¦çµ±è¨ˆå¡
   --------------------------------------------------------- */
/* ---------------------------------------------------------
   åœ“åœˆçµ±è¨ˆåœ–å®¹å™¨ï¼ˆåŒ…å«åœ“åœˆå’Œçµ±è¨ˆå¡ç‰‡ï¼‰
   --------------------------------------------------------- */
/* =========================================================
   åœ“åœˆçµ±è¨ˆåœ–å®¹å™¨ï¼ˆåŒ…å«åœ“åœˆå’Œçµ±è¨ˆå¡ç‰‡ï¼‰
   --------------------------------------------------------- */

/* åœ“åœˆçµ±è¨ˆåœ–åŒ…è£¹å®¹å™¨ï¼šé è¨­æ¨£å¼ï¼ˆå¯èƒ½ç”¨æ–¼å…¶ä»–åœ°æ–¹ï¼‰*/
.circle-stat-wrapper {
  display: flex;                                 /* å½ˆæ€§ç›’å­ä½ˆå±€ */
  align-items: center;                           /* å‚ç›´å±…ä¸­å°é½Š */
  justify-content: center;                       /* æ°´å¹³å±…ä¸­å°é½Š */
  gap: 16px;                                     /* å…ƒç´ é–“è· 16px */
  flex-wrap: wrap;                               /* å…è¨±æ›è¡Œ */
  padding: 12px;                                 /* å…§é‚Šè· 12px */
  background: #ffffff;                           /* ç™½è‰²èƒŒæ™¯ */
  border-radius: 14px;                           /* åœ“è§’ 14px */
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);  /* å…§é™°å½±è£½ä½œæ·¡é‚Šæ¡†æ•ˆæœ */
}

/* åœ“é¤…åœ–å¡ç‰‡ä¸­çš„ circle-stat-wrapperï¼šç°¡åŒ–æ¨£å¼è®“å®ƒæ›´ç·Šæ¹Š */
.circle-card .circle-stat-wrapper {
  margin: 0;                                     /* ç§»é™¤å¤–é‚Šè· */
  padding: 0;                                    /* ç§»é™¤å…§é‚Šè· */
  background: transparent;                       /* é€æ˜èƒŒæ™¯ï¼ˆä½¿ç”¨å¡ç‰‡æœ¬èº«çš„èƒŒæ™¯ï¼‰*/
  box-shadow: none;                              /* ç§»é™¤é™°å½±ï¼ˆé¿å…é›™é‡é‚Šæ¡†æ•ˆæœï¼‰*/
}

/* ---------------------------------------------------------
   åœ“åœˆçµ±è¨ˆåœ–ä¸»é«” - å‹•æ…‹é¡¯ç¤ºèŠé–’å’Œçš„æ¯”ä¾‹
   --------------------------------------------------------- */
.result-circle {
  width: 120px;              /* åœ“åœˆå¯¬åº¦ 120px */
  height: 120px;             /* åœ“åœˆé«˜åº¦ 120px */
  border-radius: 50%;        /* è¨­ç‚ºåœ“å½¢ï¼ˆ50% é‚Šè§’åŠå¾‘ï¼‰*/
  
  /* èƒŒæ™¯ä½¿ç”¨åœ“éŒæ¼¸å±¤ (conic-gradient)ï¼š
     - æ·ºç´…è‰² #fdeceaï¼ˆ0-120åº¦ï¼‰ï¼šä»£è¡¨èŠå®¶å€åŸŸ
     - æ·ºè—è‰² #e3f2fdï¼ˆ120-240åº¦ï¼‰ï¼šä»£è¡¨é–’å®¶å€åŸŸ  
     - æ·ºç¶ è‰² #e8f5e9ï¼ˆ240-360åº¦ï¼‰ï¼šä»£è¡¨å’Œå±€å€åŸŸ
     è¨»ï¼šæ­¤é è¨­å€¼æœƒè¢« JavaScript æ ¹æ“šå¯¦éš›æ¯”ä¾‹å‹•æ…‹æ›´æ–° */
  background: conic-gradient(#faddda 0deg 120deg, #cde6f8 120deg 240deg, #d7f7da 240deg 360deg);
  
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;        /* ç›¸å°å®šä½ï¼Œä¾›å…§éƒ¨æ–‡å­—æ¨™ç±¤ä½¿ç”¨çµ•å°å®šä½ */
  
  /* ä½¿ç”¨èˆ‡å¡ç‰‡ç›¸åŒçš„æ·¡é‚Šæ¡†ä¸¦ä¿ç•™è¼•å¾®æŠ•å½± */
  border: 1px solid rgba(15,23,42,0.08);
  box-shadow: 0 6px 12px rgba(0,0,0,.08);
}

/* ---------------------------------------------------------
   åœ“åœˆä¸Šçš„æ–‡å­—æ¨™ç±¤ï¼ˆèŠã€é–’ã€å’Œï¼‰
   ä½ç½®ç”± JavaScript å‹•æ…‹è¨ˆç®—ï¼Œç¢ºä¿é¡¯ç¤ºåœ¨å„å€æ®µçš„ä¸­é–“
   --------------------------------------------------------- */
.circle-segment-label {
  position: absolute;        /* çµ•å°å®šä½ï¼Œç›¸å°æ–¼çˆ¶å…ƒç´  .result-circle */
  font-size: 16px;          /* æ–‡å­—å¤§å° 16px */
  font-weight: 700;         /* æ–‡å­—ç²—é«”ï¼ˆæ•¸å€¼ 700 = boldï¼‰*/
  background: transparent;   /* é€æ˜èƒŒæ™¯ï¼Œä¸é®æ“‹ä¸‹æ–¹é¡è‰² */
  padding: 0;               /* ç„¡å…§é‚Šè· */
  border-radius: 0;         /* ç„¡åœ“è§’ */
  box-shadow: none;         /* ç„¡é™°å½±æ•ˆæœ */
  pointer-events: none;      /* ä¸æ””æˆªæ»‘é¼ äº‹ä»¶ï¼Œé¿å…å¹²æ“¾é»æ“Š */
  transition: all 0.3s ease; /* ä½ç½®ã€é¡è‰²è®ŠåŒ–æ™‚çš„å¹³æ»‘éæ¸¡å‹•ç•«ï¼ˆ0.3ç§’ï¼‰*/
}

/* èŠå®¶æ¨™ç±¤ï¼šæ·±ç´…è‰² */
.circle-segment-label.banker {
  color: #8B0000;           /* æ·±ç´…è‰² DarkRedï¼ˆRGB: 139, 0, 0ï¼‰*/
}

/* é–’å®¶æ¨™ç±¤ï¼šæ·±è—è‰² */
.circle-segment-label.player {
  color: #00008B;           /* æ·±è—è‰² DarkBlueï¼ˆRGB: 0, 0, 139ï¼‰*/
}

/* å’Œå±€æ¨™ç±¤ï¼šæ·±ç¶ è‰² */
.circle-segment-label.tie {
  color: #006400;           /* æ·±ç¶ è‰² DarkGreenï¼ˆRGB: 0, 100, 0ï¼‰*/
}

/* =========================================================
   â‘¤ çµæœå€ï¼šè¡¨æ ¼ / æ—¥èªŒ / æ‘˜è¦
   ---------------------------------------------------------
   æ§åˆ¶ .results-splitã€.rounds-tableã€.log èˆ‡æ‘˜è¦æ¬„ä½çš„æ’ç‰ˆèˆ‡æ¨£å¼ã€‚
   --------------------------------------------------------- */
.results-split { display: flex; flex-wrap: wrap; gap: 20px; align-items: stretch; }
.log {
  background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 16px;
  min-height: 420px; max-height: 80vh; overflow-y: auto; font-family: monospace; font-size: 13px; line-height: 1.45;
}
.log .success { color: #28a745; } .log .error { color: #dc3545; } .log .info { color: #17a2b8; }

/* ---------------------------------------------------------
   åœ“åœˆä¸­å¿ƒçš„åœ“å½¢å€å¡Šï¼ˆå·²ç§»é™¤ï¼Œæ­¤æ¨£å¼ä¿ç•™ä¾›æœªä¾†ä½¿ç”¨ï¼‰
   åŸæœ¬ç”¨æ–¼é¡¯ç¤ºç¸½å±€æ•¸ï¼Œç¾åœ¨çµ±è¨ˆæ•¸å­—ç›´æ¥é¡¯ç¤ºåœ¨åœ“åœˆå€åŸŸä¸Š
   --------------------------------------------------------- */
.result-circle-center {
  width: 40px;              /* ä¸­å¿ƒåœ“å¯¬åº¦ 52px */
  height: 40px;             /* ä¸­å¿ƒåœ“é«˜åº¦ 52px */
  border-radius: 50%;       /* è¨­ç‚ºåœ“å½¢ */
  background: #eef7c6;      /* æ·±è—ç°è‰²èƒŒæ™¯ï¼ˆRGB: 15, 23, 42ï¼‰*/
  color: #c0c403;           /* æ·ºç°ç™½è‰²æ–‡å­—ï¼ˆRGB: 248, 250, 252ï¼‰*/
  display: flex;            /* å½ˆæ€§ç›’å­ä½ˆå±€ */
  flex-direction: column;   /* å‚ç›´æ’åˆ—å…§å®¹ */
  align-items: center;      /* æ°´å¹³å±…ä¸­ */
  justify-content: center;  /* å‚ç›´å±…ä¸­ */
  font-size: 26px;          /* æ•¸å­—å¤§å° 26px */
  font-weight: 700;         /* æ•¸å­—ç²—é«” */
  text-align: center;       /* æ–‡å­—ç½®ä¸­ */
}

/* ç•¶ä¸­å¿ƒåœ“æ•¸å­—ç‚º 0 æ™‚éš±è—æ•´å€‹ä¸­å¿ƒåœ“ï¼ˆæ²’æœ‰è³‡æ–™æ™‚ä¸é¡¯ç¤ºï¼‰ */
.result-circle-center.hidden {
  display: none;            /* éš±è—ä¸­å¿ƒåœ“ */
}


/* =========================================================
   â‘  ä¸»è¡¨æ ¼éª¨æ¶é‡è¨­ (å’Œé¢¨æ”¹é€ )
   --------------------------------------------------------- */
.rounds-table {
  width: 100%;
  border-collapse: collapse; /* é—œéµï¼šè®“å–®å…ƒæ ¼é‚Šæ¡†åˆä½µï¼Œç·šæ¢æ›´ä¹¾æ·¨ */
  border-spacing: 0; /* ç§»é™¤å–®å…ƒæ ¼é–“è· */
  margin-top: 10px;
  background: transparent; /* ç§»é™¤èƒŒæ™¯è‰²ï¼Œè®“å®ƒé€å‡ºä¸‹æ–¹çš„å’Œç´™èƒŒæ™¯ */
  border-radius: 0; /* ç§»é™¤å¤–å±¤åœ“è§’ */
  box-shadow: none; /* ç§»é™¤æ‰€æœ‰é™°å½± */
  border: 2px solid #A99884; /* æ–°å¢ä¸€å€‹åƒå·è»¸å¤–æ¡†çš„é‚Šæ¡† */
}


.rounds-table th {
  padding: 6px 4px; color: #fff;
  background: linear-gradient(145deg,#5a6c7d 0%,#4a5568 100%); text-transform: uppercase; letter-spacing: .8px;
  box-shadow: inset 0 -3px 0 rgba(0,0,0,.25), 0 2px 6px rgba(0,0,0,.15); border: 1px solid #2d3748;
}
.rounds-table tr:hover td {
    /* æ‡¸åœæ™‚ä¹Ÿç”¨æ¼¸å±¤åº•ï¼Œä¸¦åŠ é‡ä¸Šä¸‹çš„å…§é™°å½±èˆ‡é«˜å…‰ */
    background: linear-gradient(180deg, #f4f8fc 0%, #eaf2f9 100%);
    box-shadow:
      inset 0 -4px 0 rgba(0, 0, 0, 0.18),       /* åº•é‚Šå…§é™°å½±å†æ·±ä¸€é» */
      inset 0  2px 0 rgba(255, 255, 255, 0.70); /* é ‚é‚Šå…§é«˜å…‰å†äº®ä¸€é» */
    transform: translateY(-1px);
}


.rounds-table th.cards-column,
.rounds-table td.cards-column { text-align: left; padding-left: 12px; }  /* åˆä½µå¾Œï¼šå¡ç‰Œæ¬„çµ±ä¸€é å·¦ï¼‹å…§è· */
.rounds-table td.cards-column,
.rounds-table td.color-column {
  padding-top: 4px;
  padding-bottom: 4px;
}

.rounds-table td.hand-card-cell {                                   /* åˆä½µå¾Œï¼šå–®å¼µæ‰‹ç‰Œæ¬„ä¹Ÿé å·¦ä¸”ä¿ç•™åŸå­—å‹è¨­å®š */
  text-align: left; font-family: 'JetBrains Mono','Noto Sans',monospace;
  white-space: nowrap; padding-left: 6px;
}

/* æ¬¡è¦æ¬„ä½ï¼šæ·¡èƒŒæ™¯è‰² */
.rounds-table td.minor-column {
  background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%) !important;
  opacity: 0.85;
}

.rounds-table td.hand-point-cell { font-weight: 800; color: #0d6efd; font-size: 22px; line-height: 1; }

.rounds-table td.banker-six-point {
  background: linear-gradient(180deg, #fff5f5 0%, #ffe7e6 100%) !important;
  color: #c82333;
  box-shadow:
    inset 0 -3px 0 rgba(200, 35, 51, 0.25),
    inset 0 2px 0 rgba(255, 255, 255, 0.8);
}

/* æ”¾å¤§æ¨¡å¼ï¼šæ•´é«”å­—ç´šå‡ç´šä¸¦å›ºå®šç¸®æ”¾åŸé» */
body.table-zoom .rounds-table { font-size: 18px; transform-origin: top left; }
body.table-zoom .rounds-table th,
body.table-zoom .rounds-table td { padding: 6px 8px; } /* æ”¾å¤§æ™‚ç¸®å° paddingï¼Œé¿å…è¡¨æ ¼çˆ†å¯¬ */
body.table-zoom .card-label { transform: scale(1.1); } /* å…¶ä»–æ¬„ä½ç¶­æŒåŸæœ¬ 1.1 å€ */

/* æ”¾å¤§æ¨¡å¼å°ˆç”¨ï¼šå¡ç‰Œç±¤å°ºå¯¸èª¿æ•´ */
body.table-zoom td.cards-column .card-label {
  font-size: 30px;
  min-width: 44px;
  min-height: 34px;
  padding: 4px 8px;
  transform: scale(1.2);
}

/* æ”¾å¤§æ¨¡å¼å°ˆç”¨ï¼šå¡è‰²è‰²ç±¤ä¸€ä½µè®Šå¤§ */
body.table-zoom td.color-column .color-chip {
  width: 44px;
  height: 34px;
  font-size: 18px;
}

/* é¸å–ç‹€æ…‹é«˜äº®ï¼šç¬¬ä¸€é¸æ“‡=é‡‘è‰²ã€ç¬¬äºŒé¸æ“‡=è—è‰² */
.rounds-table .card-label.selected-first {
  outline: 2px solid #45eead;
  box-shadow: 0 0 8px rgba(255, 206, 61, 0.6);
  border-radius: 6px;
}
.rounds-table .card-label.selected-second {
  outline: 2px solid #69c0ff;
  box-shadow: 0 0 8px rgba(105, 192, 255, 0.6);
  border-radius: 6px;
}
.rounds-table tr.selected-first td {
  background: linear-gradient(180deg,#fff8e1 0%,#ffe58f 100%);
  box-shadow: inset 0 -3px 0 rgba(255,193,7,0.4);
}
.rounds-table tr.selected-second td {
  background: linear-gradient(180deg,#e6f7ff 0%,#bae7ff 100%);
  box-shadow: inset 0 -3px 0 rgba(24,144,255,0.35);
}

/* =========================================================
   â‘¦ è¡¨æ ¼å…§å°å…ƒä»¶ï¼šå¡è‰²ã€å¡ç‰Œç±¤ã€æ‰‹ç‰Œé»æ•¸ç±¤
   ---------------------------------------------------------
   .color-chips/.color-chip   å¡èƒŒè‰²å¡Šï¼ˆç´…/è—/æœªçŸ¥ï¼‰
   .card-label                å–®å¼µå¡ç‰Œç±¤ï¼ˆå¯é»é¸ï¼‰
   .card-strip                ä¸€åˆ—å¡ç‰Œç±¤å®¹å™¨
   .hand-chip(-.empty)        æ‰‹ç‰Œé»æ•¸ç±¤
   ========================================================= */
.color-chips { display: inline-flex; gap: 3px; align-items: center; }
/* å¡è‰²ç±¤å­—é«”èˆ‡å°ºå¯¸ï¼ˆè¦æ”¹å¡è‰²å¤§å°åœ¨æ­¤èª¿æ•´ï¼‰ */
.color-chip {
  display: inline-flex; width: 36px; height: 32px; border-radius: 8px;
  align-items: center; justify-content: center; font-size: 22px; font-weight: 700; color: #fff;
  box-shadow: inset 0 -3px 0 rgba(0,0,0,.2); border: 1px solid rgba(0,0,0,.08);
  line-height: 1;
}
.color-chip.red { background: linear-gradient(145deg,#f45b69 0%,#d7263d 100%); }
.color-chip.blue { background: linear-gradient(145deg,#4da3ff 0%,#1e62d0 100%); }
.color-chip.unknown { background: linear-gradient(145deg,#dfe3eb 0%,#c8ceda 100%); color: #3d4356; }

/* å¡ç‰Œç±¤å­—é«”èˆ‡å°ºå¯¸ï¼ˆè¦èª¿æ•´å¡ç‰Œæ¬„å­—ç´šä¿®æ”¹é€™è£¡ï¼‰ */
.card-label {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 1px 3px; min-width: 36px; min-height: 30px;
  border-radius: 6px; background: #e7edf7; color: #233043; font-size: 22px; font-weight: 400;
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.08); transition: transform .1s ease, box-shadow .1s ease; cursor: pointer;
  line-height: 1;
}
.rounds-table td.cards-column { min-width: 220px; } /* å¡ç‰Œæ¬„ç¶­æŒå›ºå®šå¯¬åº¦ï¼Œé¿å…è¢«å¾Œé¢æ¬„ä½æ“ å£“ */
/* å¡ç‰Œåˆ—ç¶­æŒå–®è¡Œæ’åˆ—ï¼Œéœ€è¦æ™‚å¯ä»¥æ©«å‘æ²å‹• */
.rounds-table td.cards-column .card-strip {
  display: flex;
  flex-wrap: nowrap;
  gap: 3px;
  justify-content: flex-start;
  overflow-x: auto;
  padding: 2px 0 0;
}
.rounds-table td.color-column { min-width: 160px; } /* å¡è‰²æ¬„å¯¬åº¦ç•¥å°å³å¯ */
/* å¡è‰²åˆ—ä¹Ÿé–å®šå–®è¡Œï¼Œéå¤šè‰²å¡Šæ™‚æä¾›æ°´å¹³æ²å‹• */
.rounds-table td.color-column .color-chips {
  display: inline-flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding: 2px 0 0;
  gap: 3px;
}
.card-label.s-signal-card { color: #c62828; font-weight: 200; }
.card-label.non-s-signal-card { color: #4f6075; }
.card-back-blue { background: #d4e9ff !important; }
.card-back-red  { background: #f8d7da !important; }
.card-back-unknown { background: #dee2e6; }

.hand-chip-strip { display: flex; gap: 2px; flex-wrap: nowrap; justify-content: flex-start; }
.card-label-empty {
  background: transparent !important;
  box-shadow: none !important;
  color: #6b748e !important;
}

/* =========================================================
   â‘§ ç‰¹æ®Šè¡Œé«˜äº®ï¼ˆå…©å°ã€è¨Šè™Ÿè¡Œï¼‰
   --------------------------------------------------------- */
.two-pairs-round { background: #dfeeff !important; box-shadow: inset 8px 0 0 rgba(30,98,208,.35); }
.rounds-table tr.two-pairs-round td { background: #e8f3ff; }
.rounds-table tr.two-pairs-round.s-signal-round td.cards-column { background: #fff6d6; }
.rounds-table tr.s-signal-round td.cards-column { background: #fff9dd; }
.red-zero { color: #92000f; font-weight: 700; }  /* ç´”æ–‡å­—æ¨™è¨˜ã€Œç´… 0ã€æ™‚å¯ç”¨ */
.zero-card { background: #d4edda; }              /* å‚™ç”¨åº•è‰² */

.back-to-main {
  position: fixed; top: 20px; left: 20px; right: auto; width: 48px; height: 48px; z-index: 9999;
  border-radius: 12px; border: 2px solid rgba(245,87,108,.6); background: transparent;
  color: #f5576c; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,.15); transition: .3s;
}
.back-to-main:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 9px 24px rgba(0,0,0,.25);
}

/* =========================================================
   ç·¨è¼¯å·¥å…·åˆ—å…§éƒ¨ä½ˆå±€
   --------------------------------------------------------- */

/* ç·¨è¼¯å·¥å…·åˆ—ï¼šé è¨­æ°´å¹³æ’åˆ—ï¼Œå…§å®¹è‡ªå‹•æ›è¡Œ */
.edit-toolbar { 
    display: flex;                    /* å½ˆæ€§ç›’å­ä½ˆå±€ */
    align-items: center;              /* å‚ç›´å±…ä¸­å°é½Š */
    justify-content: space-between;   /* æ°´å¹³å…©ç«¯å°é½Š */
    gap: 20px;                        /* å…ƒç´ é–“è· 20px */
    flex-wrap: nowrap;                /* ä¸æ›è¡Œ */
    width: 100%;                      /* ä½”æ»¿å®¹å™¨å¯¬åº¦ */
}

/* ç·¨è¼¯å¡ç‰‡çš„å·¥å…·åˆ—ï¼šä¿æŒåŸæœ¬çš„ä¸‹æ–¹é–“è· */
.edit-card .edit-toolbar { 
    margin-bottom: 12px;              /* ä¸‹æ–¹å¤–é‚Šè· 12px */
}

/* åˆ‡ç‰Œå’Œåœ“é¤…åœ–å¡ç‰‡çš„å·¥å…·åˆ—ï¼šç§»é™¤ä¸‹æ–¹é–“è·ï¼Œç½®ä¸­å°é½Š */
.cut-card .edit-toolbar,
.circle-card .edit-toolbar { 
    margin-bottom: 0;                 /* ç§»é™¤ä¸‹æ–¹å¤–é‚Šè·ï¼Œè®“å¡ç‰‡æ›´ç·Šæ¹Š */
    justify-content: center;          /* æ°´å¹³ç½®ä¸­å°é½Šï¼ˆè¦†è“‹é è¨­çš„ space-betweenï¼‰*/
}

/* ç·¨è¼¯å¡ç‰‡å’Œåˆ‡ç‰Œå¡ç‰‡ï¼šè®“æ•´é«”å…§å®¹å‚ç›´ç½®ä¸­ */
.edit-card,
.cut-card {
    display: flex;                    /* å½ˆæ€§ç›’å­ä½ˆå±€ */
    align-items: center;              /* å‚ç›´ç½®ä¸­å°é½Š */
    justify-content: center;          /* æ°´å¹³ç½®ä¸­å°é½Š */
}
.edit-buttons { display: flex; align-items: center; gap: 20px; flex-wrap: nowrap; }
.edit-buttons .btn.icon-btn,
.tool-actions .btn.icon-btn {
  width: 84px;
  height: 84px;
  padding: 6px;
  border: none;
  border-radius: 18px;
  background: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform .15s ease;
  --icon-size: 72%;
}
.edit-buttons .btn.icon-btn:hover,
.tool-actions .btn.icon-btn:hover {
  box-shadow: none;
}
.edit-buttons .btn.icon-btn img,
.tool-actions .btn.icon-btn img {
  width: var(--icon-size);
  height: var(--icon-size);
  display: block;
  filter: none;
  border-radius: 50%;
  object-fit: contain;
  transition: transform .15s ease;
}
.edit-buttons .btn.icon-btn:hover img,
.tool-actions .btn.icon-btn:hover img {
  transform: translateY(-1px) scale(1.05);
}
.tool-actions {
  display: inline-flex;
  align-items: center;
  gap: 20px;
  margin-left: 12px;
  min-width: 320px;
  justify-content: flex-end;
}
/* åˆ‡ç‰Œæ§åˆ¶å€ï¼šæ°´å¹³æ’åˆ—ï¼ˆé è¨­ï¼Œç”¨æ–¼ç·¨è¼¯å·¥å…·åˆ—ä¸­ï¼‰*/
.cut-controls { 
    display: inline-flex; 
    align-items: center; 
    gap: 8px; 
    margin-left: auto; 
    min-width: 240px; 
}

/* åˆ‡ç‰Œå¡ç‰‡ä¸­çš„ cut-controlsï¼šæ”¹ç‚ºå‚ç›´æ’åˆ— */
.cut-card .cut-controls {
    flex-direction: column;     /* å‚ç›´æ’åˆ— */
    align-items: stretch;       /* å­å…ƒç´ æ°´å¹³æ‹‰ä¼¸å¡«æ»¿å¯¬åº¦ */
    margin-left: 0;             /* ç§»é™¤å·¦é‚Šè· */
    min-width: auto;            /* ç§»é™¤æœ€å°å¯¬åº¦é™åˆ¶ */
    gap: 10px;                  /* å¢åŠ å…ƒç´ é–“è·ä»¥é©æ‡‰å‚ç›´ä½ˆå±€ */
}

/* åˆ‡ç‰ŒæŒ‰éˆ•æ¨£å¼ */
.cut-controls .btn { 
    padding: 8px 18px; 
    border-radius: 8px; 
    border: none; 
    font-size: 15px; 
    cursor: pointer; 
    transition: transform .15s, box-shadow .15s, opacity .15s; 
    background: rgba(255,255,255,.08); 
    color: #f5f7ff; 
}
.cut-controls .btn:hover:not(:disabled) { 
    transform: translateY(-1px); 
    box-shadow: 0 6px 14px rgba(0,0,0,.25); 
}

/* ---------------------------------------------------------
   â‘¥ å°å·¥å…·èˆ‡è¼”åŠ©è¦å‰‡ï¼ˆåœ¨ cut-card ä¹‹å¾Œï¼‰
   - .input-inlineï¼šåˆ‡ç‰Œè¼¸å…¥æ¡†
   - åª’é«”æŸ¥è©¢ï¼šè² è²¬å·¦å³æ¬„/æ—¥èªŒçš„éŸ¿æ‡‰å¼
--------------------------------------------------------- */
.input-inline { display: inline-flex; align-items: center; background: rgba(255,255,255,.08); padding: 6px 10px; border-radius: 6px; color: #cdd6f4; }
.input-inline input { background: transparent; border: none; outline: none; width: 80px; color: #fff; font-size: 15px; margin-left: 8px; text-align: right; }

/* å°è¢å¹•ä½ˆå±€èª¿æ•´ */
@media (max-width: 900px) {
  .left-pane, .right-pane { flex: 1 1 100%; }
  .log { min-height: 300px; max-height: none; }
}

/* =========================================================
   â‘¢ å‰µå»ºå€ï¼šèŠ±è‰² / æ•¸å­— / å¿«é€Ÿè¨Šè™Ÿå¡ç‰‡
   ---------------------------------------------------------
   æ¶µè“‹ .selection-containerã€.suit-selectorã€.rank-selectorã€.quick-actions èˆ‡æ–°çš„è¨Šè™Ÿçµ±è¨ˆå¡ã€‚
   --------------------------------------------------------- */
.selection-container { background: #f8f9fa; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,.08); }

.signal-card-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 18px;
  align-items: stretch;
  margin-bottom: 20px;
}
/* =========================================================
   è¨Šè™Ÿå¡ç‰‡åŸºç¤æ¨£å¼
   --------------------------------------------------------- */

/* è¨Šè™Ÿå¡ç‰‡ï¼šçµ±ä¸€çš„å¤–è§€æ¨£å¼ */
.signal-card {
    background: #f8f9fa;                          /* æ·ºç°è‰²èƒŒæ™¯ */
    border-radius: 14px;                          /* åœ“è§’ 14px */
    padding: 12px;                                /* å…§é‚Šè· 12pxï¼ˆé è¨­å€¼ï¼‰*/
    border: 1px solid rgba(15, 23, 42, 0.08);     /* æ·¡è‰²é‚Šæ¡† */
}

.signal-card.cut-card,
.signal-card.circle-card {
    padding: 8px 12px;                            /* ä¸Šä¸‹ 8pxï¼Œå·¦å³ 12px */
}
.signal-card.circle-card {
    background: transparent;
    border: none;
    box-shadow: none;
}

.signal-main {
  display: flex;
  flex-direction: column;
  gap: 18px;
  width: 100%;
  max-width: 100%;
  padding: 16px;
}

.signal-side-column { display: flex; flex-direction: column; gap: 18px; }

/* =========================================================
   â‘£ å·¥å…·åˆ—å€ï¼ˆè¨Šè™Ÿ/ç·¨è¼¯/åˆ‡ç‰Œ/åœ“é¤…ï¼‰
   ---------------------------------------------------------
   æŒç®¡ .signal-toolbar-rowã€edit-toolbarã€å¿«é€ŸæŒ‰éˆ•ç¾¤ã€cut-card èˆ‡ circle-card çš„æ’åˆ—ã€‚
   ========================================================= */

/* åŸºç¤å·¥å…·åˆ—æ¨£å¼ï¼šå‚ç›´æ’åˆ—ï¼ˆèˆŠç‰ˆæ¨£å¼ï¼Œä¿ç•™ä»¥é˜²å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼‰ */
.signal-toolbar { display: flex; flex-direction: column; gap: 16px; }

/* å·¥å…·åˆ—å®¹å™¨ï¼šè®“ä¸‰å¼µå¡ç‰‡åœ¨åŒä¸€è¡Œæ°´å¹³æ’åˆ— */
.signal-toolbar-row {
  display: flex;              /* ä½¿ç”¨å½ˆæ€§ç›’å­ä½ˆå±€ */
  gap: 18px;                  /* å¡ç‰‡ä¹‹é–“çš„é–“è· 18px */
  align-items: stretch;       /* å‚ç›´æ–¹å‘æ‹‰ä¼¸ï¼Œè®“æ‰€æœ‰å¡ç‰‡é«˜åº¦ä¸€è‡´ */
  width: 100%;                /* ä½”æ»¿å®¹å™¨å¯¬åº¦ */
}

/* ç·¨è¼¯å·¥å…·åˆ—å¡ç‰‡ï¼šä½”æ“šå‰©é¤˜çš„æ‰€æœ‰ç©ºé–“ */
.signal-toolbar.quick-card {
  flex: none;
  width: auto;
  min-width: 230px;
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
}

.signal-toolbar.edit-card {
  flex: 1;                    /* è‡ªå‹•æ“´å±•ä»¥å¡«æ»¿å‰©é¤˜ç©ºé–“ */
  min-width: 0;               /* å…è¨±åœ¨å¿…è¦æ™‚ç¸®å°ï¼ˆé¿å… flexbox é»˜èªçš„ min-width: autoï¼‰ */
}

/* åˆ‡ç‰Œå¡ç‰‡ï¼šå¯¬åº¦æ ¹æ“šå…§å®¹è‡ªå‹•èª¿æ•´ */
.signal-toolbar.cut-card {
  flex: none;                 /* ä¸è‡ªå‹•æ“´å±•æˆ–ç¸®å° */
  width: auto;                /* å¯¬åº¦ç”±å…§å®¹æ±ºå®š */
}

/* åœ“é¤…åœ–å¡ç‰‡ï¼šå¯¬åº¦æ ¹æ“šå…§å®¹è‡ªå‹•èª¿æ•´ */
.signal-toolbar.circle-card {
  flex: none;                 /* ä¸è‡ªå‹•æ“´å±•æˆ–ç¸®å° */
  width: auto;                /* å¯¬åº¦ç”±å…§å®¹æ±ºå®š */
}

@media (max-width: 1200px) {
  .signal-card-grid { grid-template-columns: 1fr; }
  .signal-side-column { flex-direction: row; flex-wrap: wrap; }
  .signal-main { width: 100%; }
}

@media (max-width: 720px) {
  .signal-side-column { flex-direction: column; }
}
.quick-actions { display: flex; }
.primary-actions { display: flex; align-items: center; flex-wrap: wrap; gap: 10px; }
.primary-actions strong { font-size: 16px; color: #333; white-space: nowrap; }
.signal-count-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.signal-count-card {
  position: relative;
  width: 120px;
  height: 120px;
}
.signal-count-card img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
}
.signal-count-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  font-weight: 700;
  color: #0f172a;
  pointer-events: none;
}
.signal-clear-btn {
  padding: 0;
  background: transparent;
  border: none;
  width: 70px;
  height: 120px;
  box-shadow: none;
  line-height: 0;
}
.signal-clear-btn img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  margin: auto;
}
.signal-clear-btn:focus-visible,
.signal-clear-btn:focus {
  outline: none;
  box-shadow: none;
}
.signal-clear-btn:hover {
  transform: scale(1.06);
  cursor: pointer;
}

.primary-actions button#generateBtn {
    width: 120px;
    height: 120px;
    padding: 0;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: transform .18s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 0;
}
.primary-actions button#generateBtn img {
  max-width: 100%;
  max-height: 100%;
  display: block;
  margin: auto;
}

.primary-actions button#generateBtn:hover {
  transform: scale(1.06);
}

.primary-actions button#generateBtn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.6);
}

.primary-actions button#generateBtn:focus {
  outline: none;
}

.selectors-row {
    display: flex;
    align-items: center;
    justify-content: space-between; /* è®“å­å…ƒç´ å…©ç«¯å°é½Šï¼Œæ’æ»¿æ•´å€‹å¯¬åº¦ */
    width: 100%; /* ç¢ºä¿è‡ªèº«å¡«æ»¿çˆ¶å®¹å™¨ */
}
/*èŠ±è‰²è·Ÿæ•¸å­—åˆ†éš”ç·š*/
.separator {
    width: 0px;
    height: 70px;
    background: linear-gradient(to bottom, transparent, #dee2e6, transparent);
    margin: 5px;
}
/* èŠ±è‰²é¸æ“‡å™¨å®¹å™¨ */
.suit-selector { 
  display: flex; 
  gap: 16px; 
  align-items: center; 
}

/* èŠ±è‰²æŒ‰éˆ• */
.suit-button {
  --suit-size: 120px;
  
  width: var(--suit-size);
  height: var(--suit-size);
  max-width: var(--suit-size); /* å¢åŠ æœ€å¤§å¯¬åº¦é™åˆ¶ */
  max-height: var(--suit-size); /* å¢åŠ æœ€å¤§é«˜åº¦é™åˆ¶ */

  border: none;
  background: transparent;
  display: flex; 
  align-items: center; 
  justify-content: center; 
  cursor: pointer; 
  position: relative;
  transition: all .3s cubic-bezier(.68,-.55,.265,1.55);
}

/* èŠ±è‰²åœ–ç‰‡ */
.suit-button img {
  width: 100%;
  height: 100%;
  display: block;
  pointer-events: none;
}

/* æ»‘é¼ æ‡¸åœæ•ˆæœ */
.suit-button:hover { 
  transform: rotate(6deg); 
}

/* è¢«é¸å–æ™‚çš„æ•ˆæœ */
.suit-button.selected {
  transform: scale(1.3);
  animation: selectBounce .5s cubic-bezier(.68,-.55,.265,1.55), 
             pulseGlow 1.5s ease-in-out infinite;
}

/* é»æ“Šæ™‚çš„æ•ˆæœ */
.suit-button:active { 
  transform: scale(1.05); 
}

/* ç·¨è¼¯å€å°ˆç”¨ */
.selection-container .suit-selector {
  gap: 12px;
}

.rank-selector {
    display: flex;
    gap: 8px;
    flex-wrap: wrap; /* å…è¨±æ›è¡Œï¼Œé€™åœ¨å°è¢å¹•ä¸Šå¾ˆé‡è¦ */
    align-items: center;
    justify-content: flex-start; /* è®“æŒ‰éˆ•å¾å·¦é‚Šé–‹å§‹æ’åˆ— */
    flex: 1; /* ğŸ‘ˆ é—œéµï¼è®“æ•¸å­—å€ä½”æ“šæ‰€æœ‰å¯ç”¨çš„å‰©é¤˜ç©ºé–“ */
    min-width: 0; /* æ­é… flex: 1 ä½¿ç”¨ï¼Œé¿å…å…§å®¹æº¢å‡º */
}
.rank-button {
  --size: 100px; /* æˆ‘å€‘ä¿ç•™é€™å€‹è®Šæ•¸ä½œç‚ºæœ€å¤§å¯¬åº¦çš„åƒè€ƒ */
  
  /* è®“æŒ‰éˆ•æœ‰å½ˆæ€§ */
  flex: 1 1 80px; /* ğŸ‘ˆ é—œéµï¼flex-grow: 1, flex-shrink: 1, flex-basis: 80px */
  
  /* ç§»é™¤å›ºå®šçš„å¯¬åº¦ï¼Œæ”¹ç”¨æœ€å¤§å¯¬åº¦é™åˆ¶ */
  /* width: var(--size); */ /* è¨»è§£æˆ–åˆªé™¤é€™è¡Œ */
  max-width: var(--size); /* é™åˆ¶æŒ‰éˆ•ä¸æœƒç„¡é™æ”¾å¤§ */

  height: calc(var(--size) * 1.4);
  border: none;
  background: transparent;
  padding: 0;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
}

.rank-button img {
  width: 100%;       /* æ”¹æˆ 100% */
  height: 100%;      /* æ”¹æˆ 100% */
  object-fit: contain;  /* ä¿æŒæ¯”ä¾‹ï¼Œä¸è®Šå½¢ */
}

.rank-button.selected::after {
  content: '';
  position: absolute;
  width: 100%;       /* æ”¹æˆ 100% */
  height: 100%;      /* æ”¹æˆ 100% */
  background: url('nb/èƒŒé¢.png') center/contain no-repeat;
  z-index: 1;
}

.rank-button.selected img {
  opacity: 0;
}

/* å‹•ç•« */
@keyframes selectBounce { 0%{transform:scale(1)} 50%{transform:scale(1.2)} 100%{transform:scale(1.15)} }
@keyframes pulseGlow {
  0% { transform: scale(1.3); opacity: 1; }
  50% { transform: scale(1.33); opacity: 0.85; }
  100% { transform: scale(1.3); opacity: 1; }
}
@keyframes pulse { 0%,100%{ box-shadow: 0 0 20px rgba(0,123,255,.6), 0 0 40px rgba(0,123,255,.4), 0 8px 25px rgba(0,0,0,.3)}
                   50%     { box-shadow: 0 0 30px rgba(0,123,255,.9), 0 0 60px rgba(0,123,255,.6), 0 8px 25px rgba(0,0,0,.3)} }

/* =========================================================
   â‘ª å·¦å³æ¬„æ¯”ä¾‹èˆ‡å¿«æ·éµå€ï¼ˆã€ŒåŠŸèƒ½æ¢ï¼‹èªªæ˜ã€åŒåˆ—ï¼‰
   --------------------------------------------------------- */
.left-pane  { flex: 7 1 0; min-width: 0; display: flex; flex-direction: column; }  /* å·¦æ¬„ä½” 7 ä»½ */
.right-pane { flex: 3 1 0; min-width: 260px; max-width: none; }                    /* å³æ¬„ä½” 3 ä»½ */

/* =========================================================
   â‘¬ çµæœæ¬„ Chipï¼ˆçµ±ä¸€é€™å¥—è¦–è¦ºï¼›é¿å…å’Œ td.result-* é¡è‰²é‡ç–Šï¼‰
   --------------------------------------------------------- */
/* çµæœ / å‰å¾Œæ¬„ä½é¡è‰² (ç”± JS æ›ä¸Š outcome-* é¡åˆ¥) */
.rounds-table td.result-cell,
.rounds-table td.compare-cell { padding: 6px; font-weight: 600; }
.rounds-table td.result-cell.outcome-banker,
.rounds-table td.compare-cell.outcome-banker {
  background: #fdecea;
  color: #b71c1c;
}
.rounds-table td.result-cell.outcome-player,
.rounds-table td.compare-cell.outcome-player {
  background: #e3f2fd;
  color: #0d47a1;
}
.rounds-table td.result-cell.outcome-tie,
.rounds-table td.compare-cell.outcome-tie {
  background: #e8f5e9;
  color: #1b5e20;

/* =========================================================
   å…¨å±€è¨­å®šï¼šå’Œé¢¨æµ®ä¸–ç¹ªä¸»é¡Œ
   ========================================================= */

/* å¼•å…¥ Google Fonts å­—é«” */
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600&family=Zen+Antique&display=swap' );

/* :root å®šç¾©å…¨å±€é¡è‰²è®Šæ•¸ */
:root {
    /* --- åŸºç¤è‰² --- */
    --color-background: #F5EFEA; /* æº«æš–çš„ç±³ç™½ (ä¸»èƒŒæ™¯) */
    --color-paper: #FFFBF0;      /* å®£ç´™/å’Œç´™è‰² (å¡ç‰‡èƒŒæ™¯) */
    --color-ink-main: #3A342F;   /* ä¸»å¢¨è‰² (æ¨™é¡Œã€é‡è¦æ–‡å­—) */
    --color-ink-sub: #595148;    /* æ¬¡å¢¨è‰² (æ™®é€šå…§æ–‡) */
    --color-border-light: #DCD3C8; /* æ·ºæ£•è‰²é‚Šæ¡† (åˆ†éš”ç·š) */
    --color-border-dark: #A99884;  /* æ·±æ£•è‰²é‚Šæ¡† (å¤–æ¡†) */

    /* --- å¼·èª¿è‰² --- */
    --color-accent-red: #B94047;   /* æœ±ç´…è‰² (å°ç« ã€é«˜äº®) */
    --color-accent-blue: #2E4A62;  /* é›è—è‰² (æ¬¡è¦é«˜äº®) */
    --color-accent-gold: #B59438;  /* é‡‘è‰² (ç‰¹æ®Šæ¨™è¨˜) */

    /* --- å­—é«” --- */
    --font-main: 'Noto Serif TC', serif; /* ä¸»å­—é«” (å®‹é«”/æ˜é«”) */
    --font-title: 'Zen Antique', serif;    /* æ¨™é¡Œå­—é«” (å¤å…¸é¢¨æ ¼) */
}

/* å…¨å±€ Body æ¨£å¼ */
body {
    background-color: var(--color-background);
    /* å¦‚æœæ‚¨æœ‰å’Œç´™æè³ªåœ–ç‰‡ï¼Œè«‹å–æ¶ˆä¸‹é¢é€™è¡Œçš„è¨»è§£ */
    /* background-image: url('path/to/your/washi-texture.png'); */
    font-family: var(--font-main);
    color: var(--color-ink-sub);
    margin: 0;
}

}
/*==============================================================================================*/
/*==============================================================================================================*/
/* =========================================================
/* --- é ‚éƒ¨æ§åˆ¶å€ --- */
.selection-container,
.signal-card {
    background-color: var(--color-paper);
    border: 1px solid var(--color-border-light);
    border-radius: 4px;
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);
    padding: 16px;
    transition: all 0.3s ease;
}
.selection-container:hover,
.signal-card:hover {
    box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.12);
    transform: translateY(-2px);
}
/* ç§»é™¤èˆŠçš„ signal-toolbar-row ç›¸é—œæ¨£å¼ï¼Œå› ç‚ºæˆ‘å€‘å·²ç¶“é‡çµ„äº†HTML */
.signal-toolbar-row {
    display: flex;
    gap: 18px;
    align-items: stretch;
    width: 100%;
}
/* --- æŒ‰éˆ•æ¨£å¼ --- */
.suit-button, .rank-button, .icon-btn {
    transition: transform 0.3s cubic-bezier(.68,-.55,.265,1.55);
}
.suit-button:hover, .rank-button:hover, .icon-btn:hover {
    transform: translateY(-3px) scale(1.05);
}
.suit-button.selected {
    transform: scale(1.2);
    filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.7));
}
.rank-button.selected::after {
    /* ä¿æŒåŸæœ‰åŠŸèƒ½ */
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: url('nb/èƒŒé¢.png') center/contain no-repeat;
    z-index: 1;
}


/*   â‘ -â‘¢ è¡¨æ ¼åŸºç¤æ¨£å¼ (éª¨æ¶ã€è¡¨é ­ã€å–®å…ƒæ ¼)
   --------------------------------------------------------- */
.rounds-table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    margin-top: 10px;
    background: transparent;
    border-radius: 0;
    box-shadow: none;
    border: 1px solid #A99884; /* é‚Šæ¡†æ”¹ç‚º1pxï¼Œæ›´ç²¾ç·» */
}

.rounds-table th {
    border: none;
    border-bottom: 2px solid #3A342F;
    padding: 12px 8px;
    text-align: center;
    font-size: 16px;
    font-weight: 600;
    background: #F0EAE4; /* ç¨æ·±çš„ç¶¾å¸ƒè‰² */
    box-shadow: none;
    color: #3A342F;
    letter-spacing: 1px;
    font-family: 'Zen Antique', serif;
}

.rounds-table td {
    border: none;
    border-bottom: 1px solid #DCD3C8;
    padding: 10px 8px;
    text-align: center;
    font-size: 18px;
    background: transparent;
    box-shadow: none;
    color: #595148;
    transition: background-color 0.3s ease;
}

.rounds-table th.cards-column,
.rounds-table td.cards-column,
.rounds-table td.color-column { 
    text-align: left; 
    padding-left: 12px; 
}

/* =========================================================
   â‘£ æ ¸å¿ƒï¼šç‹€æ…‹èˆ‡é«˜äº®æ¨£å¼ (å’Œé¢¨æ”¹é€ )
   --------------------------------------------------------- */

/* --- 1. è¨Šè™Ÿç‰Œå­—é«”é¡è‰² (Signal Cards) --- */
/* æˆ‘å€‘ä¿ç•™é¡è‰²ï¼Œä½†å¯ä»¥åŠ å¼·å­—é‡æˆ–å¢åŠ åº•ç´‹ä¾†å‡¸é¡¯ */
.card-label.s-signal-card { 
    color: #B94047; /* ä½¿ç”¨æˆ‘å€‘å®šç¾©çš„æœ±ç´…è‰² */
    font-weight: 700; /* åŠ ç²— */
}
.card-label.non-s-signal-card { 
    color: #6c635b; /* éè¨Šè™Ÿç‰Œä½¿ç”¨æ›´æŸ”å’Œçš„å¢¨è‰² */
}

/* --- 2. ç‰¹æ®Šå±€é«˜äº® (Så±€ / Tå±€ / å…©å°) --- */
/* æ”¾æ£„èˆŠçš„äº®è‰²èƒŒæ™¯ï¼Œæ”¹ç”¨æ›´å…¸é›…çš„æ¨™è¨˜æ–¹å¼ */

/* å…©å°å±€ (two-pairs-round) */
.rounds-table tr.two-pairs-round td {
    background: rgba(212, 175, 55, 0.08); /* æ·¡æ·¡çš„é‡‘è‰²èƒŒæ™¯ */
}
.rounds-table tr.two-pairs-round td:first-child::before {
    content: 'å°'; /* åœ¨å±€æ•¸å‰ç”¨æ–‡å­—æ¨™è¨˜ */
    color: #B59438;
    font-weight: 600;
    margin-right: 4px;
}

/* Så±€æˆ–Tå±€ (s-signal-round) */
.rounds-table tr.s-signal-round td.cards-column {
    background: rgba(185, 64, 71, 0.07); /* æ·¡æ·¡çš„æœ±ç´…è‰²èƒŒæ™¯ */
    box-shadow: inset 3px 0 0 #B94047; /* å·¦å´å‡ºç¾ä¸€æ¢æœ±ç´…è‰²æ¨™è¨˜ç·š */
}

/* --- 3. èŠå®¶6é»å‹ (banker-six-point) --- */
/* åŒæ¨£æ”¾æ£„åˆºçœ¼çš„ç²‰è‰²èƒŒæ™¯ï¼Œæ”¹ç”¨æ¨™è¨˜ */
.rounds-table td.banker-six-point {
    background: transparent !important; /* å¼·åˆ¶è¦†è“‹èˆŠæ¨£å¼ */
    color: #B94047; /* ä½¿ç”¨æœ±ç´…è‰²æ–‡å­— */
    font-weight: 700;
    position: relative; /* ç‚ºäº†æ·»åŠ æ¨™è¨˜ */
}
/* åœ¨é»æ•¸æ—é‚ŠåŠ ä¸€å€‹å°å°çš„ã€Œå…­ã€å­—æˆ–åœ–ç«  */
.rounds-table td.banker-six-point::after {
    content: 'å…­';
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 10px;
    color: #B94047;
    opacity: 0.8;
}

/* --- 4. çµæœæ¬„ä½é¡è‰² (outcome-*) --- */
/* é€™äº›æ˜¯é¡¯ç¤ºã€ŒèŠ/é–’/å’Œã€çµæœçš„å„²å­˜æ ¼ï¼Œéœ€è¦ä¿ç•™æ¸…æ™°åº¦ */
.rounds-table td.result-cell.outcome-banker,
.rounds-table td.compare-cell.outcome-banker {
  background: rgba(185, 64, 71, 0.07); /* æ·¡æœ±ç´…èƒŒæ™¯ */
  color: #B94047; /* æ·±æœ±ç´…æ–‡å­— */
}
.rounds-table td.result-cell.outcome-player,
.rounds-table td.compare-cell.outcome-player {
  background: rgba(46, 74, 98, 0.08); /* æ·¡é›è—èƒŒæ™¯ */
  color: #2E4A62; /* æ·±é›è—æ–‡å­— */
}
.rounds-table td.result-cell.outcome-tie,
.rounds-table td.compare-cell.outcome-tie {
  background: rgba(181, 148, 56, 0.1); /* æ·¡é‡‘è‰²èƒŒæ™¯ */
  color: #B59438; /* æ·±é‡‘è‰²æ–‡å­— */
}

/* --- 5. å¡ç‰Œèˆ‡å¡è‰²æ¨™ç±¤ (card-label, color-chip) --- */
/* é€™äº›å°æ¨™ç±¤ä¹Ÿéœ€è¦æ”¹é€  */
.card-label {
    background: #F8F3ED; /* æ·ºç±³è‰²èƒŒæ™¯ */
    color: #595148; /* å¢¨è‰²æ–‡å­— */
    border-radius: 4px;
    box-shadow: none;
    border: 1px solid #DCD3C8;
    padding: 1px 4px;
    min-width: 32px;
    min-height: 28px;
    font-size: 20px;
}
.card-back-blue { background: #E4EBF2 !important; border-color: #C2CCD8 !important; }
.card-back-red  { background: #F5E8E9 !important; border-color: #DDC9CB !important; }

.color-chip {
    border-radius: 50%; /* æ”¹æˆåœ“å½¢ï¼Œåƒåœæ£‹æ£‹å­ */
    width: 30px;
    height: 30px;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
    border: 1px solid rgba(0,0,0,0.1);
}
.color-chip.red { background: linear-gradient(145deg,#c94a4a 0%,#a13838 100%); }
.color-chip.blue { background: linear-gradient(145deg,#4a7ac9 0%,#385fa1 100%); }

/* --- å³å´æ¬„ --- */
.right-pane {
    display: flex;
    flex-direction: column;
    gap: 18px;
}
.right-pane-tools { /* åŒ…è£¹åˆ‡ç‰Œå’Œåœ“é¤…åœ–çš„å®¹å™¨ */
    display: flex;
    gap: 18px;
    justify-content: center;
}

/* æ—¥èªŒå€ */
.log {
    background-color: var(--color-paper);
    border: 1px solid var(--color-border-light);
    border-radius: 6px;
    padding: 16px;
    font-family: var(--font-main);
    font-size: 14px;
    line-height: 1.8;
    color: var(--color-ink-sub);
    min-height: 300px;
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);
}
.log .success { color: #2E7D32; } /* ç¶ è‰²ï¼Œæ›´æ²‰ç©© */
.log .error { color: var(--color-accent-red); } /* æœ±ç´…è‰² */
.log .info { color: var(--color-accent-blue); } /* é›è—è‰² */

/* è¿·ä½ é è¦½æ ¼ */
.mini-grid-wrapper {
    border: 1px solid var(--color-border-light);
    border-radius: 10px;
    background: var(--color-paper);
    overflow: hidden;
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);
}
.grid-preview .cell {
    background: #F8F3ED;
    border: 1px solid var(--color-border-light);
}
/* ... å…¶ä»– grid-preview æ¨£å¼å¯ä»¥ä¿ç•™ï¼Œé¡è‰²æœƒè¢«è¦†è“‹ ... */

/* åˆ‡ç‰Œèˆ‡åœ“é¤…åœ–å¡ç‰‡ */
.cut-card, .circle-card {
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.08);
}
.cut-controls .btn { /* åˆ‡ç‰ŒæŒ‰éˆ• */
    background: var(--color-accent-red);
    color: white;
    border: none;
    border-radius: 6px;
    font-family: var(--font-main);
}
.cut-controls .btn:hover {
    background: #963338;
}
.input-inline { /* åˆ‡ç‰Œè¼¸å…¥æ¡† */
    background: #F0EAE4;
    color: var(--color-ink-main);
    border-radius: 6px;
}
.input-inline input {
    color: var(--color-ink-main);
}

/* åœ“é¤…åœ– */
.result-circle {
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--color-border-light);
}
.result-circle-center {
    background: var(--color-paper);
    color: var(--color-accent-gold);
    width: 48px;
    height: 48px;
    font-size: 24px;
}


</style>

    <!-- Excel åŒ¯å‡ºå¥—ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
</head>
<body>
    <!-- =================================================================== -->
    <!-- === 3. é é¢ä¸»é«”å…§å®¹ (Body) === -->
    <!-- =================================================================== -->

    <!-- æ‡¸æµ®æŒ‰éˆ•ï¼šè¿”å›ä¸»é  -->
    <button class="back-to-main" id="backToMain" title="è¿”å›ä¸»é ">ğŸ¯</button>
    
<!-- ä¸»è¦å…§å®¹å®¹å™¨ -->
<div class="container">
    
    <!-- =================================================================== -->
    <!-- === æ–°ä½ˆå±€ï¼šæ§åˆ¶å€ === -->
    <!-- =================================================================== -->
    <div class="controls">
        <div class="signal-card-grid">

            <!-- =========================================================
                â‘  æ–°çš„ç¬¬ä¸€è¡Œï¼šèŠ±è‰²é¸æ“‡å™¨ + åœ“å½¢å·¥å…·æŒ‰éˆ•
            ========================================================== -->
            <section class="selection-container signal-card signal-main">
                <div class="selectors-row" style="justify-content: space-between; align-items: center;">
                    
                    <!-- å·¦å´ï¼šèŠ±è‰²é¸æ“‡ -->
                    <div class="suit-selector">
                        <a class="suit-button é»‘æ¡ƒ" data-value="â™ "><img src="suit/é»‘æ¡ƒ.png" alt="é»‘æ¡ƒ"></a>
                        <a class="suit-button æ„›å¿ƒ" data-value="â™¥"><img src="suit/æ„›å¿ƒ.png" alt="æ„›å¿ƒ"></a>
                        <a class="suit-button æ–¹å¡Š" data-value="â™¦"><img src="suit/æ–¹å¡Š.png" alt="æ–¹å¡Š"></a>
                        <a class="suit-button æ¢…èŠ±" data-value="â™£"><img src="suit/æ¢…èŠ±.png" alt="æ¢…èŠ±"></a>
                    </div>

                    <!-- å³å´ï¼šåœ“å½¢å·¥å…·æŒ‰éˆ• (å¾ edit-card æ¬éä¾†) -->
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="edit-buttons">
                            <button class="btn icon-btn" id="btnEdit" disabled aria-label="ç·¨è¼¯" style="--icon-size: 160%;"><img src="suit/ç·¨è¼¯.png" alt="ç·¨è¼¯"></button>
                            <button class="btn icon-btn" id="btnSwap" disabled aria-label="å¡äº¤æ›" style="--icon-size: 140%;"><img src="suit/å¡äº¤æ›.png" alt="å¡äº¤æ›"></button>
                            <button class="btn icon-btn" id="btnRound" disabled aria-label="å±€äº¤æ›" style="--icon-size: 140%;"><img src="suit/å±€äº¤æ›.png" alt="å±€äº¤æ›"></button>
                            <button class="btn icon-btn" id="btnAutoColor" disabled aria-label="å¡è‰²" style="--icon-size: 140%;"><img src="suit/å¡è‰².png" alt="å¡è‰²"></button>
                            <button class="btn icon-btn" id="btnCancelEdit" disabled aria-label="å–æ¶ˆ" style="--icon-size: 140%;"><img src="suit/å–æ¶ˆ.png" alt="å–æ¶ˆ"></button>
                            <button class="btn icon-btn" id="btnApplyChanges" disabled aria-label="å¥—ç”¨" style="--icon-size: 140%;"><img src="suit/å¥—ç”¨.png" alt="å¥—ç”¨"></button>
                            <button class="btn icon-btn" id="clearBtn" aria-label="æ¸…ç©º" style="--icon-size: 140%;"><img src="suit/æ¸…ç©º.png" alt="æ¸…ç©º"></button>
                        </div>
                        <div class="tool-actions">
                            <button class="btn icon-btn" id="btnExportCombined" aria-label="å°å‡º Excel" style="--icon-size: 120%;"><img src="suit/excel.png" alt="å°å‡º Excel"></button>
                            <button class="btn icon-btn" id="btnPreview" aria-label="é è¦½" style="--icon-size: 180%;"><img src="suit/é è¦½.png" alt="é è¦½"></button>
                            <button class="btn icon-btn" id="btnSpeech" aria-label="èªéŸ³" style="--icon-size: 180%;"><img src="suit/èªéŸ³.png" alt="èªéŸ³"></button>
                            <button class="btn icon-btn" id="btnApplyTools" aria-label="è¨ˆç®—å·¥å…·" style="--icon-size: 170%;"><img src="suit/è¨ˆç®—.png" alt="è¨ˆç®—å·¥å…·"></button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- =========================================================
                â‘¡ æ–°çš„ç¬¬äºŒè¡Œï¼šå¿è€…/GOæŒ‰éˆ• + æ•¸å­—ç‰Œå¡é¸æ“‡å™¨
            ========================================================== -->
            <section class="selection-container signal-card signal-main">
                <div class="selectors-row" style="justify-content: space-between; align-items: center;">

                    <!-- å·¦å´ï¼šå¿è€…/GO/æ¸…é™¤æŒ‰éˆ• -->
                    <div class="quick-actions">
                        <div class="primary-actions">
                            <button id="generateBtn" aria-label="GO"><img src="suit/GO.png" alt="GO"></button>
                            <div class="signal-count-row">
                                <div class="signal-count-card">
                                    <img src="suit/å¼µæ•¸.png" alt="è¨Šè™Ÿç‰Œå¼µæ•¸">
                                    <span id="signalCardCount" class="signal-count-value">0</span>
                                </div>
                                <button type="button" class="signal-clear-btn" onclick="clearSignalSelections()" aria-label="æ¸…é™¤è¨Šè™Ÿç‰Œ"><img src="suit/æ¸…é™¤.png" alt="æ¸…é™¤"></button>
                            </div>
                        </div>
                    </div>

                    <!-- å³å´ï¼šæ•¸å­—ç‰Œå¡é¸æ“‡ -->
                    <div class="rank-selector" style="flex: 1; justify-content: flex-end;">
                        <a class="rank-button" data-value="A"><img src="nb/A.png" alt="A"></a>
                        <a class="rank-button" data-value="2"><img src="nb/2.png" alt="2"></a>
                        <a class="rank-button" data-value="3"><img src="nb/3.png" alt="3"></a>
                        <a class="rank-button" data-value="4"><img src="nb/4.png" alt="4"></a>
                        <a class="rank-button" data-value="5"><img src="nb/5.png" alt="5"></a>
                        <a class="rank-button" data-value="6"><img src="nb/6.png" alt="6"></a>
                        <a class="rank-button" data-value="7"><img src="nb/7.png" alt="7"></a>
                        <a class="rank-button" data-value="8"><img src="nb/8.png" alt="8"></a>
                        <a class="rank-button" data-value="9"><img src="nb/9.png" alt="9"></a>
                        <a class="rank-button" data-value="10"><img src="nb/10.png" alt="10"></a>
                        <a class="rank-button" data-value="J"><img src="nb/J.png" alt="J"></a>
                        <a class="rank-button" data-value="Q"><img src="nb/Q.png" alt="Q"></a>
                        <a class="rank-button" data-value="K"><img src="nb/K.png" alt="K"></a>
                    </div>
                </div>
                
                <!-- éš±è—çš„ checkbox (æ­£ç¢ºä½ç½®ï¼šä¿æŒåœ¨ selection-container å…§éƒ¨) -->
                <div class="rank-checkboxes" style="display: none;">
                    <label><input type="checkbox" value="A" class="rank-checkbox"> A</label>
                    <label><input type="checkbox" value="2" class="rank-checkbox"> 2</label>
                    <label><input type="checkbox" value="3" class="rank-checkbox"> 3</label>
                    <label><input type="checkbox" value="4" class="rank-checkbox"> 4</label>
                    <label><input type="checkbox" value="5" class="rank-checkbox"> 5</label>
                    <label><input type="checkbox" value="6" class="rank-checkbox"> 6</label>
                    <label><input type="checkbox" value="7" class="rank-checkbox"> 7</label>
                    <label><input type="checkbox" value="8" class="rank-checkbox"> 8</label>
                    <label><input type="checkbox" value="9" class="rank-checkbox"> 9</label>
                    <label><input type="checkbox" value="10" class="rank-checkbox"> 10</label>
                    <label><input type="checkbox" value="J" class="rank-checkbox"> J</label>
                    <label><input type="checkbox" value="Q" class="rank-checkbox"> Q</label>
                    <label><input type="checkbox" value="K" class="rank-checkbox"> K</label>
                </div>
            </section>

        </div>
    </div>

    <!-- =================================================================== -->
    <!-- === æ–°ä½ˆå±€ï¼šä¸‹æ–¹çµæœå€ === -->
    <!-- =================================================================== -->
    <div class="results-split">
      
      <!-- å·¦å´æ¬„ï¼šè¡¨æ ¼ -->
      <div class="left-pane">
        <table class="rounds-table" id="roundsTable" style="display: none; margin-top: 0;">
          <thead id="roundsHead"></thead>
          <tbody id="roundsBody"></tbody>
        </table>
      </div>

      <!-- å³å´æ¬„ï¼šæ—¥èªŒèˆ‡æ–°å·¥å…· -->
      <div class="right-pane">
        
        <!-- æ–°å¢çš„å·¥å…·å€ï¼šåˆ‡ç‰Œèˆ‡åœ“é¤…åœ– -->
        <div class="right-pane-tools" style="display: flex; gap: 18px; margin-bottom: 18px; justify-content: center; align-items: center;">
            
            <!-- åˆ‡ç‰Œå¡ç‰‡ (å¾ä¸Šæ–¹æ¬ä¸‹ä¾†) -->
            <section class="signal-card signal-toolbar cut-card">
                <div class="edit-toolbar">
                    <div class="cut-controls">
                        <div class="input-inline">
                            <label for="cutPos">åˆ‡ç‰Œå¼µæ•¸</label>
                            <input id="cutPos" type="number" min="0" value="0">
                        </div>
                        <button class="btn" id="btnCut">åˆ‡ç‰Œ</button>
                    </div>
                </div>
            </section>

            <!-- åœ“é¤…åœ–å¡ç‰‡ (å¾ä¸Šæ–¹æ¬ä¸‹ä¾†) -->
            <section class="signal-card signal-toolbar circle-card">
                <div class="edit-toolbar">
                    <div class="circle-stat-wrapper">
                        <div class="result-circle" id="resultCircle">
                            <div class="circle-segment-label banker" id="circleBankerLabel"></div>
<div class="circle-segment-label player" id="circlePlayerLabel"></div>
<div class="circle-segment-label tie" id="circleTieLabel"></div>

                            <div class="result-circle-center">
                                <span id="circleTotal"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- åŸæœ¬çš„æ—¥èªŒèˆ‡å…¶ä»–å…§å®¹ -->
        <div class="log" id="logArea"></div>
        <div class="mini-grid-wrapper">
          <div class="grid-preview mini" id="statsGridPreview"><div class="grid-placeholder">å°šç„¡ç‰Œé´è³‡æ–™</div></div>
        </div>
        <div class="signal-summary" id="signalSummary"></div>
      </div>
    </div>

</div>


	    <!-- =================================================================== -->
	    <!-- === 4. JavaScript è…³æœ¬å€ (Scripting) === -->
	    <!-- =================================================================== -->

    <!-- è…³æœ¬ä¸€ï¼šè¿”å›ä¸»é æŒ‰éˆ•çš„åŠŸèƒ½ -->

    <script>
        document.getElementById('backToMain').addEventListener('click', () => {
            window.location.href = 'index.html'; // é»æ“Šå¾Œè·³è½‰åˆ° index.html
        });
    </script>

    <!-- è…³æœ¬äºŒï¼šèŠ±è‰²åœ“å½¢æŒ‰éˆ•èˆ‡èˆŠç‰ˆ checkbox ä¹‹é–“çš„æ©‹æ¥ç¨‹å¼ç¢¼ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- æ§åˆ¶ä¸­å¿ƒåœ“çš„é¡¯ç¤º/éš±è—ï¼ˆç•¶ç¸½æ•¸ç‚º 0 æ™‚éš±è—ï¼‰---
            function updateCircleCenterVisibility() {
                const circleTotal = document.getElementById('circleTotal');
                const circleCenter = document.querySelector('.result-circle-center');
                if (circleTotal && circleCenter) {
                    const totalValue = parseInt(circleTotal.textContent) || 0;
                    if (totalValue === 0) {
                        circleCenter.classList.add('hidden');
                    } else {
                        circleCenter.classList.remove('hidden');
                    }
                }
            }
            
            // åˆå§‹åŒ–æ™‚æª¢æŸ¥ä¸€æ¬¡
            updateCircleCenterVisibility();
            
            // ç›£è½ circleTotal çš„å…§å®¹è®ŠåŒ–ï¼ˆä½¿ç”¨ MutationObserverï¼‰
            const circleTotal = document.getElementById('circleTotal');
            if (circleTotal) {
                const observer = new MutationObserver(updateCircleCenterVisibility);
                observer.observe(circleTotal, { 
                    childList: true,      // ç›£è½å­ç¯€é»è®ŠåŒ–
                    characterData: true,  // ç›£è½æ–‡å­—å…§å®¹è®ŠåŒ–
                    subtree: true         // ç›£è½æ‰€æœ‰å¾Œä»£ç¯€é»
                });
            }
            
            // --- åˆå§‹åŒ–åœ“å½¢æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶ï¼ˆèŠ±è‰²ï¼‰ ---
            const suitButtons = document.querySelectorAll('.suit-button');
            suitButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    event.preventDefault(); // é˜²æ­¢ <a> æ¨™ç±¤è·³è½‰
                    button.classList.toggle('selected'); // åˆ‡æ›é¸ä¸­/æœªé¸ä¸­ç‹€æ…‹
                    // æ¯æ¬¡é»æ“Šéƒ½è§¸ç™¼ä¸€æ¬¡å¼µæ•¸è¨ˆç®—
                    if (typeof window.updateSignalCardCount === 'function') {
                        window.updateSignalCardCount();
                    }
                });
            });
            
            // --- åˆå§‹åŒ–æ–¹å½¢æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶ï¼ˆæ•¸å­—ï¼‰ ---
            const rankButtons = document.querySelectorAll('.rank-button');
            rankButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // åˆ‡æ›é¸ä¸­ç‹€æ…‹
                    this.classList.toggle('selected');
                    
                    // æ›´æ–°å°æ‡‰çš„ checkbox
                    const value = this.dataset.value;
                    const checkbox = document.querySelector(`.rank-checkbox[value="${value}"]`);
                    if (checkbox) {
                        checkbox.checked = this.classList.contains('selected');
                        // è§¸ç™¼ change äº‹ä»¶ä»¥æ›´æ–°è¨Šè™Ÿç‰Œå¼µæ•¸
                        checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            });
            
            // --- åŒæ­¥ checkbox ç‹€æ…‹åˆ°æ•¸å­—æŒ‰éˆ• ---
            const syncRankButtons = function() {
                const checkboxes = document.querySelectorAll('.rank-checkbox');
                checkboxes.forEach(checkbox => {
                    const value = checkbox.value;
                    const button = document.querySelector(`.rank-button[data-value="${value}"]`);
                    if (button) {
                        if (checkbox.checked) {
                            button.classList.add('selected');
                        } else {
                            button.classList.remove('selected');
                        }
                    }
                });
            };
            
            // ç›£è½ checkbox è®ŠåŒ–ï¼ˆçµ¦å¿«æ·æŒ‰éˆ•ç”¨ï¼‰
            const checkboxes = document.querySelectorAll('.rank-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', syncRankButtons);
            });

            // --- æ ¸å¿ƒæ©‹æ¥ï¼šè®“ signals.js èƒ½è®€å–åˆ°åœ“å½¢æŒ‰éˆ•çš„é¸æ“‡çµæœ ---
            function getSelectedSuitsFromButtons() {
                const selectedButtons = document.querySelectorAll('.suit-button.selected');
                return Array.from(selectedButtons).map(btn => btn.dataset.value);
            }

            // --- è¦†å¯«èˆŠçš„å‡½å¼ï¼Œè®“å®ƒå€‘ä½¿ç”¨æ–°çš„è®€å–æ–¹å¼ ---
            if (typeof window.updateSignalCardCount === 'function') {
                const originalUpdate = window.updateSignalCardCount; // ä¿ç•™åŸå§‹å‡½å¼ä»¥å‚™ä¸æ™‚ä¹‹éœ€
                window.updateSignalCardCount = function() {
                    const suits = getSelectedSuitsFromButtons(); // å¾åœ“å½¢æŒ‰éˆ•è®€å–
                    const ranks = Array.from(document.querySelectorAll('.rank-checkbox:checked')).map(cb => cb.value);
                    const totalCards = suits.length * ranks.length * 8;
                    const countElement = document.getElementById('signalCardCount');
                    if (countElement) {
                        countElement.textContent = totalCards;
                        if (totalCards === 0) countElement.style.color = '#dc3545';
                        else if (totalCards <= 64) countElement.style.color = '#28a745';
                        else if (totalCards <= 128) countElement.style.color = '#ffc107';
                        else countElement.style.color = '#fd7e14';
                    }
                }
            }
            if (typeof window.applySignalConfig === 'function') {
                const originalApply = window.applySignalConfig; // ä¿ç•™åŸå§‹å‡½å¼
                window.applySignalConfig = function() {
                    const suits = getSelectedSuitsFromButtons(); // å¾åœ“å½¢æŒ‰éˆ•è®€å–
                    const ranks = Array.from(document.querySelectorAll('.rank-checkbox:checked')).map(cb => cb.value);
                    
                    // æ›´æ–°åˆ° signals.js çš„æ ¸å¿ƒé‚è¼¯ä¸­
                    if (window.RedZeroLogic && typeof window.RedZeroLogic.updateSignalConfig === 'function') {
                         window.RedZeroLogic.updateSignalConfig({ suits, ranks });
                    } else if (typeof SIGNAL_CONFIG !== 'undefined') { // å‚™ç”¨æ–¹æ¡ˆ
                        SIGNAL_CONFIG.suits = suits;
                        SIGNAL_CONFIG.ranks = ranks;
                    }
                    
                    // å¯«å…¥æ—¥èªŒ
                    log(`è¨Šè™Ÿè¨­å®šå·²æ›´æ–°ï¼šèŠ±è‰²[${suits.join(',')}] æ•¸å­—[${ranks.join(',')}]`, 'success');
                    log(`é è¨ˆè¨Šè™Ÿç‰Œç¸½æ•¸ï¼š${suits.length * ranks.length * 8}å¼µ`, 'info');
                }
            }

            // --- é é¢è¼‰å…¥æ™‚ï¼Œä¾ç…§å·²ä¿å­˜è¨­å®šåŒæ­¥ UI ---
            if (typeof window.syncSignalUiFromConfig === 'function') {
                window.syncSignalUiFromConfig();
            } else if (window.RedZeroLogic && typeof window.RedZeroLogic.syncSignalUiFromConfig === 'function') {
                window.RedZeroLogic.syncSignalUiFromConfig();
            }
            if (typeof window.updateSignalCardCount === 'function') window.updateSignalCardCount();
        });
    </script>

    <!-- è…³æœ¬ä¸‰ï¼šå¼•ç”¨æ‹†åˆ†å¾Œçš„æ ¸å¿ƒé‚è¼¯æª”æ¡ˆèˆ‡ UI æª”æ¡ˆ -->
    <!-- å…ˆè¼‰å…¥æ ¸å¿ƒé‚è¼¯å†è¼‰å…¥ UIï¼Œä»¥ç¢ºä¿åº•å±¤é¡åˆ¥å’Œæ¨¡æ“¬å™¨å·²å®šç¾© -->
    <script src="signals.js"></script>
    <script src="signals_ui.js"></script>
</body>
</html>
